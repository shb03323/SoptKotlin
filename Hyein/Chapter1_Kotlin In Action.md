# Kotlin In Action

## 1. 코틀린이란 무엇이며, 왜 필요한가?



#### 0. 서론

- **코틀린**

  - 정의 : 자바 플랫폼에서 돌아가는 새로운 프로그래밍 언어

  - 특징

    - 간결
    - 실용적
    - 상호운용성 중시

  - 활용범위

    - 서버개발
    - 안드로이드 앱 개발

    

***



#### 1. 1 코틀린의 주요 특성

##### 1.1.1 대상 플랫폼 : 서버, 안드로이드 등 자바가 실행되는 모든 곳

- **코틀린 주목적**

  : 자바가 사용되고 있는 모든 용도에 **적합**하면서도 더 **간결**하고 **생산적**이며 **안전한** 대체 언어를 제공하는 것

- **활용 영역**

  - 서버상의 코드(특히 웹 어플리케이션의 백엔드)
  - 안드로이드 디바이스에서 실행되는 모바일 애플리케이션



##### 1.1.2 정적 타입 지정 언어

:key: 코틀린은 정적 타입 지정 언어이다.

- **정적 타입 지정 언어**

  : 모는 프로그램 구성 요소의 타입을 **컴파일 시점**에 알 수 있고 프로그램 안에서 객체의 필드나 메소드를 사용할 때마다 **컴파일러**가 타입을 검증해준다.

  

- **코틀린 컴파일러**

  - 문맥으로부터 변소 타입을 자동으로 유추 가능 :arrow_forward: *타입 선언 생략 가능*

  - **타입 추론**

    : 컴파일러가 문맥을 고려해 변수 타입을 결정하는 기능



- **정적 타입 지정의 장점**

  - 성능

    - 실행 시점에 어떤 메소드를 호출할 지 알아내는 과정이 필요 없다

      :arrow_forward: *메소드 호출이 더 빠르다*

  - 신뢰성

    - 컴파일러가 프로그램의 정확성을 검증

      :arrow_forward: *프로그램이 오류로 중단될 가능성이 더 적어진다*

  - 유지보수성

    - 코드에서 다루는 객체가 어떤 타입에 속하는지 알 수 있다

      :arrow_forward: *처음 보는 코드를 다룰 때도 더 쉽다*

  - 도구지원

    - 정적 타입 지정 활용으로 더 안전하게 리팩토링 할 수 있다
    - 도구는 더 정확한 코드 완성 기능을 제공한다
    - IDE의 다른 지원 기능도 더 잘 만들 수 있다



:key: **null이 될  수 있는 타입(nullable type)을 지원한다**

​	:arrow_forward: 컴파일 시점에 널 포인터 예외가 발생할 수 있느지 여부를 검사, 신뢰성 증대



##### 1.1.3 함수형 프로그래밍과 객체지향 프로그래밍

- **함수형 프로그래밍의 핵심 개념**
  - **일급 시민인 함수**
    - 함수를 *일반 값* 처럼 사용 가능
    - 함수를 *변수*에 저장가능
    - 함수를 *인자*로 다른 함수에 전달 가능
    - 함수에서 *새로운 함수*를 만들어서 반환 가능
  - **불변성**
    - 일단 만들어지고 나면 내부상태가 절대로 바뀌지 않는 불변 객체를 사용하여 프로그램을 작성한다
  - **부수 효과 없음**
    - 입력이 같으면 항상 같은 출력을 내놓는다
    - 다른 객체의 상태를 변경하지 않는다
    - 함수 외부나 다른 바깥 환경과 상호작용하지 않는 **순수 함수**를 사용한다



- **장점**

  - **간결성**

    - 더 강력한 추상화 가능 (by 순수함수를 값처럼 활용)

      :arrow_forward: 코드 중복 방지

  - **다중 스레드를 사용하여도 안전하다**

    - 불변 데이터 구조를 사용하고 순수 함수를 데이터 구조에 적용한다면 같은 데이터를 여러 스레드가 변경할 수 없다

      :arrow_forward: 복잡한 동기화를 적용하지 않아도 된다

  - **테스트하기 쉽다**

    - 순수함수는 준비 코드 없이 독립적으로 테스트 가능
      - 준비 코드 : 부수 효과가 있는 함수를 실행할 때 필요한 전체 환경을 구성하는 코드



##### 1.1.5 무료 오픈소스

- **오픈소스**

  : 코틀린 언어와 컴파일러, 라이브러리 및 코틀린과 관련된 모든 도구는 모두 오픈소스이다



***



#### 1.2 코틀린 응용

##### 1.2.1 코틀린 서버 프로그래밍

- 적합 이유
  - **자바 코드와 매끄럽게 상호운용 가능**
  - 기존 자바 프레임워크 완벽 지원
  - HTML 생성기, 영속화 등의 일반적인 작업을 위한 새로운 도구를 제공



##### 1.2.2 코틀린 안드로이드 프로그래밍

- 모바일 애플리케이션

  - 다양한 디바이스에 대해 서비스의 신뢰성을 보장할 필요
  - 빠르게 개발해 배포할 필요

- 장점 (vs 자바)

  - **애플리케이션의 신뢰성 증대**

    ex) `NullPointerException` , 코틀린 타입 시스템은 null값을 정확히 추적

  - **호환성과 관련한 문제 야기 X**

    - 자바 6와 완전히 호환가능

  - **성능 측면 손해 X**

    - 자바 코드와 똑같이 효율적 실행

    - 런타임 시스템이 작다

      :arrow_forward: 컴파일 후 패키징한 애플리케이션 크기도 자바 app에 비해 많이 늘어나지 않는다

    - 람다함수를 인라이닝 (람다를 사용해도 새로운 객체가 만들어지지 않음)

      :arrow_forward: 가비지 컬렉션이 늘어나지 않음



***

#### 1.3 코틀린의 철학

- **코틀린의 주요 특성**

  - **실용성**

    - 성공적으로 검증된 **해법과 기능에 의존**

      :arrow_forward: 언어의 복잡도 감소, 기존 개념을 통해 쉽게 습득 가능

    - 도구 강조

      - 편리한 개발 환경

      - IDE의 코틀린 언어 지원

        :arrow_forward: 더 간결한 구조로 바꿀 수 있는 대부분의 코드 패턴을 도구가 자동으로 감지해서 수정하라 제안

        

  - **간결성**

    - 의도 쉽게 파악할 수 있는 구문 구조 제공

    - 의도를 달성하는 방법을 이해할 때 방해가 될 수 있는 부가적 준비 코드가 적다

      :arrow_forward: **준비 코드를 묵시적 제공**

    - 기능이 다양한 표준 라이브러리 제공

      :arrow_forward: 일반적 기능을 라이브러리 안에 캡슐화

      - 람다지원

    :key: 간결성은 **생산성을 향상**시켜주고 **개발을 더 빠르게**진행할 수 있게 한다

    

  - **안전성**

    : 프로그램에서 발생할 수 있는 오류 중 일부 유형의 오류를 프로그램 설계가 **원천적으로 방지**

    :key: 안전성과 생산성 사이에는 **트레이드 오프**관계가 성립

    - **JVM에서 실행** :arrow_forward: 상당한 안전성 보장
      - 메모리 안전성 보장
      - 버퍼 오버플로 방지
      - 동적으로 할당한 메모리를 잘못 사용함으로 인해 발생할 문제 예방
      - 타입 안전성 보장 (정적 타입 지정 언어)
    - **타입 자동 추론** (by 코틀린 컴파일러)
    - **컴파일 시점 검사** :arrow_forward: 더 많은 오류방지​
    - 널이 될 수 있는 값을 다룰 수 있는 편리한 방법 다양하게 제공

  - **상호운용성**

    - 자바 기존 라이브러리 사용 가능

      :arrow_forward: 자바코드에서 코틀린 코드 호출할 때도 아무런 노력이 필요 없다

    - **유연성**

      : 자바와 코틀린 코드를 프로젝트에서 원하는 대로 섞어쓸 수 있다

    - 기존 자바 라이브러리를 가능한 최대한 **활용**

    - 다중 언어 프로젝트를 완전히 지원하는 **도구**



***



#### 1.4 코틀린 도구 사용

##### 1.4.1 코틀린 코드 컴파일

- 코틀린도 **컴파일 언어**이다

  :arrow_forward: 실행하기 전에 먼저 코드를 컴파일 해야한다

- 컴파일

  1. `.kt` (소스코드 확장자)
  2.  코틀린 컴파일러가 코틀린 소스코드 분석
  3. `.class` 파일 제작
  4. `.jar`
  5. 코틀린 런타임 라이브러리와 함께 배포
  6. 어플리케이션



##### 1.4.2 도구

1. 인텔리J 아이디어
2. 안드로이드 스튜디오
3. 대화형 셀
4. 이클립스
5. 온라인 놀이터